---
/**
 * RadarAccent — Subtle CSS-only radar sweep decoration.
 * PRD 002: Theme and Design Foundation
 *
 * Pure CSS decorative element using conic-gradient.
 * Animation is disabled under prefers-reduced-motion.
 * Entirely presentational — hidden from assistive technology.
 *
 * @example
 * <RadarAccent size="120px" />
 * <RadarAccent size="80px" color="green" />
 */
interface Props {
  /** Diameter of the radar element */
  size?: string;
  /** Glow colour variant */
  color?: "red" | "green";
  /** Additional CSS class names */
  class?: string;
}

const { size = "100px", color = "green", class: className = "" } = Astro.props;

const glowColor = color === "green" ? "rgba(0, 230, 118, 0.30)" : "rgba(198, 40, 40, 0.35)";

const sweepColor = color === "green" ? "rgba(0, 230, 118, 0.6)" : "rgba(198, 40, 40, 0.6)";
---

<div
  class:list={["radar-accent", className]}
  style={`--radar-size: ${size}; --radar-glow: ${glowColor}; --radar-sweep: ${sweepColor};`}
  aria-hidden="true"
  role="presentation"
>
  <div class="radar-accent__ring"></div>
  <div class="radar-accent__sweep"></div>
  <div class="radar-accent__dot"></div>
</div>

<style>
  .radar-accent {
    position: relative;
    width: var(--radar-size);
    height: var(--radar-size);
    flex-shrink: 0;
  }

  /* Outer ring */
  .radar-accent__ring {
    position: absolute;
    inset: 0;
    border: 1px solid var(--color-border);
    border-radius: 50%;
    box-shadow: inset 0 0 6px var(--radar-glow);
  }

  /* Crosshair lines */
  .radar-accent__ring::before,
  .radar-accent__ring::after {
    content: "";
    position: absolute;
    background: var(--color-border);
  }
  .radar-accent__ring::before {
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
  }
  .radar-accent__ring::after {
    left: 50%;
    top: 0;
    bottom: 0;
    width: 1px;
  }

  /* Sweeping arm */
  .radar-accent__sweep {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: conic-gradient(
      from 0deg,
      transparent 0deg,
      var(--radar-sweep) 30deg,
      transparent 60deg
    );
    animation: radar-spin 4s linear infinite;
    opacity: 0.5;
  }

  /* Centre dot */
  .radar-accent__dot {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 4px;
    height: 4px;
    margin: -2px 0 0 -2px;
    background: var(--radar-sweep);
    border-radius: 50%;
    box-shadow: 0 0 4px var(--radar-glow);
  }

  @keyframes radar-spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* Disable animation for reduced-motion users */
  @media (prefers-reduced-motion: reduce) {
    .radar-accent__sweep {
      animation: none;
      /* Show a static sweep wedge instead */
      opacity: 0.3;
    }
  }
</style>
