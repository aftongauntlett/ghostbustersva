---
/**
 * MotionToggle — global toggle for site-wide motion/animations.
 * PRD 009: Motion & Effects
 *
 * A small toggle button that lets users enable/disable all motion effects.
 * Respects `prefers-reduced-motion` OS setting as default.
 * Persists preference in `localStorage` as `motion-preference`.
 * Sets `data-reduce-motion="true"` on <html> when disabled.
 */
---

<button
  class="motion-toggle"
  type="button"
  aria-label="Toggle motion effects"
  aria-pressed="true"
  data-motion-toggle
>
  <span class="motion-toggle__icon" aria-hidden="true">⚡</span>
  <span class="motion-toggle__label">Motion</span>
</button>

<style>
  .motion-toggle {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.65rem;
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    letter-spacing: var(--tracking-wide);
    text-transform: uppercase;
    color: var(--color-status-active);
    background: var(--color-chip-bg);
    border: 1px solid var(--color-chip-border);
    border-radius: var(--radius-full);
    cursor: pointer;
    transition:
      color var(--transition-fast),
      background var(--transition-fast),
      border-color var(--transition-fast);
    white-space: nowrap;
    line-height: 1;
  }

  .motion-toggle:hover,
  .motion-toggle:focus-visible {
    background: var(--color-hover-bg);
    border-color: var(--color-hover-border);
  }

  .motion-toggle:focus-visible {
    outline: 2px solid var(--color-focus);
    outline-offset: 2px;
  }

  /* Off state — muted appearance */
  .motion-toggle[aria-pressed="false"] {
    color: var(--color-text-muted);
    background: rgba(138, 148, 163, 0.08);
    border-color: rgba(138, 148, 163, 0.2);
  }

  .motion-toggle[aria-pressed="false"]:hover,
  .motion-toggle[aria-pressed="false"]:focus-visible {
    background: rgba(138, 148, 163, 0.14);
    border-color: rgba(138, 148, 163, 0.35);
  }

  .motion-toggle__icon {
    font-size: 0.85rem;
    line-height: 1;
  }

  .motion-toggle[aria-pressed="false"] .motion-toggle__icon::after {
    content: " off";
  }
</style>
